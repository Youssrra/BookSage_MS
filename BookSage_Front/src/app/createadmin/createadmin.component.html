<form id="form" action="login" method="post" data-parsley-validate class="form-horizontal form-label-left" #form="ngForm">
  <div class="clearfix"></div>
  <div class="row">
    <div class="col-md-12 col-sm-12">
      <div class="x_panel">
        <div class="x_content">
          <br />

          <div class="item form-group">
            <label class="col-form-label col-md-3 col-sm-3 label-align" for="Username">Username <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6">
              <input type="text" [(ngModel)]="user.username" id="Username" name="Username" required="required" class="form-control"
                #username="ngModel" required minlength="5" (blur)="username.control.markAsTouched()">
              <div *ngIf="username.invalid && (username.dirty || username.touched)">
                <div *ngIf="username.errors?.['required']" class="error-message">Username cannot be empty.</div>
                <div *ngIf="username.errors?.['minlength']" class="error-message">Username must be at least 5 characters long.</div>
              </div>
            </div>
          </div>

          <div class="item form-group">
            <label class="col-form-label col-md-3 col-sm-3 label-align" for="Email">Email <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6">
              <input type="email" [(ngModel)]="user.email" id="Email" name="Email" required class="form-control" #email="ngModel"
                (blur)="email.control.markAsTouched()" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}">
              <div *ngIf="email.invalid && (email.dirty || email.touched)">
                <div *ngIf="email.errors?.['required']" class="error-message">Email cannot be empty.</div>
                <div *ngIf="email.errors?.['pattern']" class="error-message">Invalid email format.</div>
              </div>
            </div>
          </div>

          <div class="item form-group">
            <label class="col-form-label col-md-3 col-sm-3 label-align" for="Adresse">FirstName <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6">
              <input type="text" [(ngModel)]="user.firstName" id="FirstName" name="firstName" #firstName="ngModel" required minlength="3" class="form-control"
              (blur)="firstName.control.markAsTouched()">
              <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)">
                <div *ngIf="firstName.errors?.['required']" class="error-message">FirstName cannot be empty.</div>
                <div *ngIf="firstName.errors?.['minlength']" class="error-message">FirstName must be at least 3 characters long.</div>
              </div>
            </div>
          </div>
        
          <div class="item form-group">
            <label class="col-form-label col-md-3 col-sm-3 label-align" for="Adresse">LastName <span class="required">*</span></label>
            <div class="col-md-6 col-sm-6">
              <input type="text" [(ngModel)]="user.lastName" id="LastName" name="lastName" #lastName="ngModel" required minlength="3" class="form-control"
              (blur)="lastName.control.markAsTouched()">
              <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)">
                <div *ngIf="lastName.errors?.['required']" class="error-message">LastName cannot be empty.</div>
                <div *ngIf="lastName.errors?.['minlength']" class="error-message">LastName must be at least 3 characters long.</div>
              </div>
            </div>
          </div>

          <div class="item form-group">
            <label for="password" class="col-form-label col-md-3 col-sm-3 label-align">Password</label>
            <div class="col-md-6 col-sm-6">
              <input id="password"[(ngModel)]="user.password" class="form-control" type="password" name="password" required minlength="8" #passwordInput>
              <div *ngIf="passwordInput.value && passwordInput.value.length < 8" class="error-message">
                Password must be at least 8 characters long.
              </div>
            </div>
          </div>

          <div class="item form-group">
            <label for="Cpassword" class="col-form-label col-md-3 col-sm-3 label-align">Confirm Password</label>
            <div class="col-md-6 col-sm-6">
              <input id="Cpassword" class="form-control" type="password" name="Cpassword" required #CpasswordInput
                (input)="checkPasswordMatch(passwordInput.value, CpasswordInput.value)">
              <div *ngIf="passwordMismatch" class="error-message">Passwords do not match.</div>
            </div>
          </div>

          <div class="ln_solid"></div>

          <div class="item form-group">
            <div class="col-md-6 col-sm-6 offset-md-3">
              <button class="btn btn-primary" type="reset">Reset</button>
              <button type="submit" (click)="createNewAdmin()" class="btn btn-success" [disabled]="!form?.valid || !form?.dirty">
                Create New Admin
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="alert alert-success d-flex align-items-center" *ngIf="successAlertVisible" role="alert">
    Client account successfully added!
    <button type="button" class="close align-self-start ml-auto" (click)="closeSuccessAlert()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="alert alert-danger d-flex align-items-center" *ngIf="errorAlertVisible" role="alert">
    An error occurred while creating the account!
    <button type="button" class="close align-self-start ml-auto" (click)="closeErrorAlert()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  
</form>
